{"ast":null,"code":"import React,{Component}from\"react\";import Product from\"../pages/Product\";import{jsx as _jsx}from\"react/jsx-runtime\";export default class ProductRequest extends Component{constructor(props){super(props);this.state={items:[],isLoading:false,error:false};}componentDidMount(){this.fetchData();}componentDidUpdate(prevProps){if(prevProps.product!==this.props.product){this.fetchData();}}fetchData(){const productName=this.props.product;let url=`http://localhost:8070/products/${productName}/v1`;fetch(url).then(res=>res.json()).then(result=>{this.setState({isLoading:true,items:result[productName]});},error=>{this.setState({isLoading:true,error:true});});}render(){const{items,isLoading,error}=this.state;if(error){return/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430\"});}if(!isLoading){return/*#__PURE__*/_jsx(\"h1\",{children:\"Loading...\"});}if(JSON.stringify(items)==='[]'){return/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041F\\u0443\\u0441\\u0442\\u043E\"});}return items.map(thisProduct=>{return/*#__PURE__*/_jsx(Product,{thisProduct:thisProduct,productName:this.props.product},thisProduct.id);});}}","map":{"version":3,"names":["React","Component","Product","jsx","_jsx","ProductRequest","constructor","props","state","items","isLoading","error","componentDidMount","fetchData","componentDidUpdate","prevProps","product","productName","url","fetch","then","res","json","result","setState","render","children","JSON","stringify","map","thisProduct","id"],"sources":["C:/Users/Егор/WebstormProjects/Online-Store-main/frontend/src/Requests/ProductRequest.jsx"],"sourcesContent":["import React, {Component} from \"react\";\r\nimport Product from \"../pages/Product\";\r\n\r\nexport default class ProductRequest extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            items : [],\r\n            isLoading: false,\r\n            error: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchData();\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.product !== this.props.product) {\r\n            this.fetchData();\r\n        }\r\n    }\r\n\r\n    fetchData() {\r\n        const productName = this.props.product;\r\n\r\n        let url = `http://localhost:8070/products/${productName}/v1`;\r\n        fetch(url)\r\n            .then(res => res.json())\r\n            .then(\r\n                (result) => {\r\n                    this.setState({\r\n                        isLoading: true,\r\n                        items: result[productName]\r\n                    });\r\n                },\r\n                (error) => {\r\n                    this.setState({\r\n                        isLoading: true,\r\n                        error: true\r\n                    });\r\n                }\r\n            );\r\n    }\r\n\r\n\r\n    render() {\r\n        const {items, isLoading, error} = this.state;\r\n\r\n        if(error){\r\n            return(\r\n                <h1>Ошибка</h1>\r\n            )\r\n        }\r\n\r\n        if(!isLoading){\r\n            return(\r\n                <h1>Loading...</h1>\r\n            )\r\n        }\r\n\r\n        if(JSON.stringify(items) === '[]'){\r\n            return(\r\n                <h1>Пусто</h1>\r\n            )\r\n        }\r\n\r\n\r\n        return (\r\n            items.map((thisProduct) =>{\r\n                return <Product key={thisProduct.id} thisProduct={thisProduct} productName={this.props.product}/>})\r\n        )\r\n    }\r\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,SAAS,KAAO,OAAO,CACtC,MAAO,CAAAC,OAAO,KAAM,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEvC,cAAe,MAAM,CAAAC,cAAc,QAAS,CAAAJ,SAAU,CAClDK,WAAWA,CAACC,KAAK,CAAE,CACf,KAAK,CAACA,KAAK,CAAC,CAEZ,IAAI,CAACC,KAAK,CAAG,CACTC,KAAK,CAAG,EAAE,CACVC,SAAS,CAAE,KAAK,CAChBC,KAAK,CAAE,KACX,CAAC,CACL,CAEAC,iBAAiBA,CAAA,CAAG,CAChB,IAAI,CAACC,SAAS,CAAC,CAAC,CACpB,CAEAC,kBAAkBA,CAACC,SAAS,CAAE,CAC1B,GAAIA,SAAS,CAACC,OAAO,GAAK,IAAI,CAACT,KAAK,CAACS,OAAO,CAAE,CAC1C,IAAI,CAACH,SAAS,CAAC,CAAC,CACpB,CACJ,CAEAA,SAASA,CAAA,CAAG,CACR,KAAM,CAAAI,WAAW,CAAG,IAAI,CAACV,KAAK,CAACS,OAAO,CAEtC,GAAI,CAAAE,GAAG,CAAG,kCAAkCD,WAAW,KAAK,CAC5DE,KAAK,CAACD,GAAG,CAAC,CACLE,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CACAG,MAAM,EAAK,CACR,IAAI,CAACC,QAAQ,CAAC,CACVd,SAAS,CAAE,IAAI,CACfD,KAAK,CAAEc,MAAM,CAACN,WAAW,CAC7B,CAAC,CAAC,CACN,CAAC,CACAN,KAAK,EAAK,CACP,IAAI,CAACa,QAAQ,CAAC,CACVd,SAAS,CAAE,IAAI,CACfC,KAAK,CAAE,IACX,CAAC,CAAC,CACN,CACJ,CAAC,CACT,CAGAc,MAAMA,CAAA,CAAG,CACL,KAAM,CAAChB,KAAK,CAAEC,SAAS,CAAEC,KAAK,CAAC,CAAG,IAAI,CAACH,KAAK,CAE5C,GAAGG,KAAK,CAAC,CACL,mBACIP,IAAA,OAAAsB,QAAA,CAAI,sCAAM,CAAI,CAAC,CAEvB,CAEA,GAAG,CAAChB,SAAS,CAAC,CACV,mBACIN,IAAA,OAAAsB,QAAA,CAAI,YAAU,CAAI,CAAC,CAE3B,CAEA,GAAGC,IAAI,CAACC,SAAS,CAACnB,KAAK,CAAC,GAAK,IAAI,CAAC,CAC9B,mBACIL,IAAA,OAAAsB,QAAA,CAAI,gCAAK,CAAI,CAAC,CAEtB,CAGA,MACI,CAAAjB,KAAK,CAACoB,GAAG,CAAEC,WAAW,EAAI,CACtB,mBAAO1B,IAAA,CAACF,OAAO,EAAsB4B,WAAW,CAAEA,WAAY,CAACb,WAAW,CAAE,IAAI,CAACV,KAAK,CAACS,OAAQ,EAA1Ec,WAAW,CAACC,EAA+D,CAAC,EAAC,CAAC,CAE/G,CACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}