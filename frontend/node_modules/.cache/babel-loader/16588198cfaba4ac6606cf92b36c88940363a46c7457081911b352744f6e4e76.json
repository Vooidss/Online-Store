{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u0415\\u0433\\u043E\\u0440\\\\WebstormProjects\\\\Online-Store-main\\\\frontend\\\\src\\\\Requests\\\\ProductRequest.jsx\";\nimport React, { Component } from \"react\";\nimport Product from \"../pages/Product\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class ProductRequest extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: [],\n      isLoading: false,\n      error: false\n    };\n  }\n  componentDidMount() {\n    this.fetchData();\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.product !== this.props.product) {\n      this.fetchData();\n    }\n  }\n  fetchData() {\n    const productName = this.props.product;\n    let url = `http://localhost:8071/products/${productName}/v1`;\n    fetch(url).then(res => res.json()).then(result => {\n      this.setState({\n        isLoading: true,\n        items: result[productName]\n      });\n    }, error => {\n      this.setState({\n        isLoading: true,\n        error: true\n      });\n    });\n  }\n  render() {\n    const {\n      items,\n      isLoading,\n      error\n    } = this.state;\n    if (error) {\n      return /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this);\n    }\n    if (!isLoading) {\n      return /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this);\n    }\n    if (JSON.stringify(items) === '[]') {\n      return /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u041F\\u0443\\u0441\\u0442\\u043E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this);\n    }\n    return items.map(thisProduct => {\n      return /*#__PURE__*/_jsxDEV(Product, {\n        thisProduct: thisProduct,\n        productName: this.props.product\n      }, thisProduct.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 24\n      }, this);\n    });\n  }\n}","map":{"version":3,"names":["React","Component","Product","jsxDEV","_jsxDEV","ProductRequest","constructor","props","state","items","isLoading","error","componentDidMount","fetchData","componentDidUpdate","prevProps","product","productName","url","fetch","then","res","json","result","setState","render","children","fileName","_jsxFileName","lineNumber","columnNumber","JSON","stringify","map","thisProduct","id"],"sources":["C:/Users/Егор/WebstormProjects/Online-Store-main/frontend/src/Requests/ProductRequest.jsx"],"sourcesContent":["import React, {Component} from \"react\";\r\nimport Product from \"../pages/Product\";\r\n\r\nexport default class ProductRequest extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            items : [],\r\n            isLoading: false,\r\n            error: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchData();\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.product !== this.props.product) {\r\n            this.fetchData();\r\n        }\r\n    }\r\n\r\n    fetchData() {\r\n        const productName = this.props.product;\r\n\r\n        let url = `http://localhost:8071/products/${productName}/v1`;\r\n        fetch(url)\r\n            .then(res => res.json())\r\n            .then(\r\n                (result) => {\r\n                    this.setState({\r\n                        isLoading: true,\r\n                        items: result[productName]\r\n                    });\r\n                },\r\n                (error) => {\r\n                    this.setState({\r\n                        isLoading: true,\r\n                        error: true\r\n                    });\r\n                }\r\n            );\r\n    }\r\n\r\n\r\n    render() {\r\n        const {items, isLoading, error} = this.state;\r\n\r\n        if(error){\r\n            return(\r\n                <h1>Ошибка</h1>\r\n            )\r\n        }\r\n\r\n        if(!isLoading){\r\n            return(\r\n                <h1>Loading...</h1>\r\n            )\r\n        }\r\n\r\n        if(JSON.stringify(items) === '[]'){\r\n            return(\r\n                <h1>Пусто</h1>\r\n            )\r\n        }\r\n\r\n\r\n        return (\r\n            items.map((thisProduct) =>{\r\n                return <Product key={thisProduct.id} thisProduct={thisProduct} productName={this.props.product}/>})\r\n        )\r\n    }\r\n}"],"mappings":";AAAA,OAAOA,KAAK,IAAGC,SAAS,QAAO,OAAO;AACtC,OAAOC,OAAO,MAAM,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvC,eAAe,MAAMC,cAAc,SAASJ,SAAS,CAAC;EAClDK,WAAWA,CAACC,KAAK,EAAE;IACf,KAAK,CAACA,KAAK,CAAC;IAEZ,IAAI,CAACC,KAAK,GAAG;MACTC,KAAK,EAAG,EAAE;MACVC,SAAS,EAAE,KAAK;MAChBC,KAAK,EAAE;IACX,CAAC;EACL;EAEAC,iBAAiBA,CAAA,EAAG;IAChB,IAAI,CAACC,SAAS,CAAC,CAAC;EACpB;EAEAC,kBAAkBA,CAACC,SAAS,EAAE;IAC1B,IAAIA,SAAS,CAACC,OAAO,KAAK,IAAI,CAACT,KAAK,CAACS,OAAO,EAAE;MAC1C,IAAI,CAACH,SAAS,CAAC,CAAC;IACpB;EACJ;EAEAA,SAASA,CAAA,EAAG;IACR,MAAMI,WAAW,GAAG,IAAI,CAACV,KAAK,CAACS,OAAO;IAEtC,IAAIE,GAAG,GAAG,kCAAkCD,WAAW,KAAK;IAC5DE,KAAK,CAACD,GAAG,CAAC,CACLE,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CACAG,MAAM,IAAK;MACR,IAAI,CAACC,QAAQ,CAAC;QACVd,SAAS,EAAE,IAAI;QACfD,KAAK,EAAEc,MAAM,CAACN,WAAW;MAC7B,CAAC,CAAC;IACN,CAAC,EACAN,KAAK,IAAK;MACP,IAAI,CAACa,QAAQ,CAAC;QACVd,SAAS,EAAE,IAAI;QACfC,KAAK,EAAE;MACX,CAAC,CAAC;IACN,CACJ,CAAC;EACT;EAGAc,MAAMA,CAAA,EAAG;IACL,MAAM;MAAChB,KAAK;MAAEC,SAAS;MAAEC;IAAK,CAAC,GAAG,IAAI,CAACH,KAAK;IAE5C,IAAGG,KAAK,EAAC;MACL,oBACIP,OAAA;QAAAsB,QAAA,EAAI;MAAM;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAEvB;IAEA,IAAG,CAACpB,SAAS,EAAC;MACV,oBACIN,OAAA;QAAAsB,QAAA,EAAI;MAAU;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAE3B;IAEA,IAAGC,IAAI,CAACC,SAAS,CAACvB,KAAK,CAAC,KAAK,IAAI,EAAC;MAC9B,oBACIL,OAAA;QAAAsB,QAAA,EAAI;MAAK;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAEtB;IAGA,OACIrB,KAAK,CAACwB,GAAG,CAAEC,WAAW,IAAI;MACtB,oBAAO9B,OAAA,CAACF,OAAO;QAAsBgC,WAAW,EAAEA,WAAY;QAACjB,WAAW,EAAE,IAAI,CAACV,KAAK,CAACS;MAAQ,GAA1EkB,WAAW,CAACC,EAAE;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAA6D,CAAC;IAAA,CAAC,CAAC;EAE/G;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}